<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedZen Network & Fundraising Event - Digital Invitation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1e7245 0%, #2a8659 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .invitation-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            max-width: 600px;
            width: 100%;
            position: relative;
        }
        
        .watermark-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjgwMCIgdmlld0JveD0iMCAwIDYwMCA4MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjMwMCIgY3k9IjQwMCIgcj0iMjAwIiBmaWxsPSJyZ2JhKDQ2LCAxNTEsIDIwNCwgMC4wNSkiLz4KPGV4dCB4PSIzMDAiIHk9IjQxMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQ4IiBmaWxsPSJyZ2JhKDQ2LCAxNTEsIDIwNCwgMC4xKSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TWVkWmVuPC90ZXh0Pgo8L3N2Zz4=');
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: 1;
            overflow: hidden;
        }
        
        .floating-crosses {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .health-cross {
            position: absolute;
            color: rgba(39, 174, 96, 0.15);
            font-size: 24px;
            font-weight: bold;
            animation: floatUp linear infinite;
        }
        
        .health-cross:nth-child(1) {
            left: 10%;
            animation-duration: 8s;
            animation-delay: 0s;
            font-size: 20px;
        }
        
        .health-cross:nth-child(2) {
            left: 25%;
            animation-duration: 12s;
            animation-delay: 2s;
            font-size: 28px;
        }
        
        .health-cross:nth-child(3) {
            left: 45%;
            animation-duration: 10s;
            animation-delay: 4s;
            font-size: 22px;
        }
        
        .health-cross:nth-child(4) {
            left: 65%;
            animation-duration: 14s;
            animation-delay: 1s;
            font-size: 26px;
        }
        
        .health-cross:nth-child(5) {
            left: 80%;
            animation-duration: 9s;
            animation-delay: 3s;
            font-size: 20px;
        }
        
        .health-cross:nth-child(6) {
            left: 15%;
            animation-duration: 11s;
            animation-delay: 5s;
            font-size: 24px;
        }
        
        .health-cross:nth-child(7) {
            left: 35%;
            animation-duration: 13s;
            animation-delay: 6s;
            font-size: 18px;
        }
        
        .health-cross:nth-child(8) {
            left: 55%;
            animation-duration: 10s;
            animation-delay: 7s;
            font-size: 25px;
        }
        
        .health-cross:nth-child(9) {
            left: 75%;
            animation-duration: 8s;
            animation-delay: 8s;
            font-size: 21px;
        }
        
        .health-cross:nth-child(10) {
            left: 90%;
            animation-duration: 12s;
            animation-delay: 9s;
            font-size: 23px;
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .content {
            position: relative;
            z-index: 2;
            padding: 40px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .medzen-logo {
            background: linear-gradient(135deg, #27ae60, #1e8449);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 24px;
            margin-right: 15px;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .company-name {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #27ae60, #1e8449);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .invitation-text {
            font-size: 18px;
            color: #2c3e50;
            font-weight: 500;
            margin-bottom: 30px;
        }
        
        .event-title {
            font-size: 28px;
            font-weight: 700;
            color: #1e8449;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .tagline {
            font-size: 16px;
            color: #e67e22;
            font-weight: 600;
            text-align: center;
            margin-bottom: 25px;
            font-style: italic;
        }
        
        .event-description {
            background: linear-gradient(135deg, #27ae60, #1e8449);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .event-description h3 {
            font-size: 20px;
            margin-bottom: 10px;
        }
        
        .event-description p {
            font-size: 16px;
            line-height: 1.6;
        }
        
        .event-details {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #e67e22;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .detail-item:last-child {
            margin-bottom: 0;
        }
        
        .detail-icon {
            background: #e67e22;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .detail-text {
            color: #2c3e50;
            font-weight: 500;
        }
        
        .rsvp-section {
            text-align: center;
        }
        
        .rsvp-button {
            background: linear-gradient(135deg, #e67e22, #d35400);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(230, 126, 34, 0.3);
            margin-bottom: 20px;
            position: relative;
            animation: pulseButton 2s infinite;
            transform-origin: center;
        }
        
        .rsvp-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(230, 126, 34, 0.4);
            animation: none;
        }
        
        .rsvp-button:active {
            transform: translateY(0) scale(0.98);
        }
        
        .rsvp-button::before {
            content: 'üëá';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            animation: pointDown 1.5s ease-in-out infinite;
        }
        
        @keyframes pulseButton {
            0% {
                transform: scale(1);
                box-shadow: 0 5px 20px rgba(230, 126, 34, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 30px rgba(230, 126, 34, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 5px 20px rgba(230, 126, 34, 0.3);
            }
        }
        
        @keyframes pointDown {
            0%, 100% {
                transform: translateX(-50%) translateY(0px);
                opacity: 0.7;
            }
            50% {
                transform: translateX(-50%) translateY(5px);
                opacity: 1;
            }
        }
        
        .contact-info {
            font-size: 14px;
            color: #7f8c8d;
            line-height: 1.6;
        }
        
        .rsvp-form {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #27ae60;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #1e8449);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .submit-btn:hover {
            transform: translateY(-1px);
        }
        
        .cancel-btn {
            background: #95a5a6;
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        .success-message {
            display: none;
            background: #27ae60;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .barcode-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            border: 2px dashed #27ae60;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.1);
        }
        
        .barcode-container {
            text-align: center;
            margin: 15px 0;
            max-width: 100%;
            overflow: hidden;
        }
        
        .barcode {
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            letter-spacing: 1px;
        }
        
        .barcode-id {
            font-weight: bold;
            color: #2c3e50;
            font-size: 16px;
            margin: 10px 0;
        }
        
        .ticket-info {
            display: none !important;
        }
        
        .shooting-stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
            animation: shootingStar 2s ease-out forwards;
        }
        
        .star::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        .star-1 {
            width: 3px;
            height: 3px;
            top: 20%;
            left: 10%;
            animation-delay: 0.2s;
        }
        
        .star-2 {
            width: 2px;
            height: 2px;
            top: 40%;
            left: 30%;
            animation-delay: 0.5s;
        }
        
        .star-3 {
            width: 4px;
            height: 4px;
            top: 60%;
            left: 70%;
            animation-delay: 0.8s;
        }
        
        .star-4 {
            width: 2px;
            height: 2px;
            top: 30%;
            left: 80%;
            animation-delay: 1.1s;
        }
        
        .star-5 {
            width: 3px;
            height: 3px;
            top: 70%;
            left: 20%;
            animation-delay: 1.4s;
        }
        
        @keyframes shootingStar {
            0% {
                opacity: 0;
                transform: translateX(-100px) translateY(-100px) scale(0);
            }
            20% {
                opacity: 1;
                transform: translateX(0) translateY(0) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateX(100px) translateY(50px) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateX(200px) translateY(100px) scale(0);
            }
        }
        
        .loading-message {
            display: none;
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }
        
        .error-message {
            display: none;
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }
        
        .scan-instructions {
            background: #27ae60;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            margin-top: 10px;
        }
        
        @media (max-width: 480px) {
            .content {
                padding: 25px;
            }
            
            .company-name {
                font-size: 24px;
            }
            
            .event-title {
                font-size: 22px;
            }
            
            .detail-item {
                flex-direction: column;
                text-align: center;
            }
            
            .detail-icon {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="invitation-container">
        <div class="watermark-bg">
            <div class="floating-crosses">
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
                <div class="health-cross">+</div>
            </div>
        </div>
        <div class="content">
            <div class="header">
                <div class="logo-section">
                    <div class="medzen-logo">+</div>
                    <div class="company-name">MedZen</div>
                </div>
                <p class="invitation-text">You are cordially invited to</p>
            </div>
            
            <h1 class="event-title">MedZen Network & Fundraising Event</h1>
            <p class="tagline">Transforming Lives with a Tap</p>
            
            <div class="event-description">
                <h3>Support Our Mission!</h3>
                <p>Help us bring accessible, life saving healthcare to underserved communities in Africa.</p>
            </div>
            
            <div class="event-details">
                <div class="detail-item">
                    <div class="detail-icon">üìÖ</div>
                    <div class="detail-text"><strong>Saturday, August 2nd</strong></div>
                </div>
                <div class="detail-item">
                    <div class="detail-icon">üïê</div>
                    <div class="detail-text"><strong>11:00 AM - 3:00 PM EST</strong></div>
                </div>
                <div class="detail-item">
                    <div class="detail-icon">üìç</div>
                    <div class="detail-text"><strong>2 Wisconsin Circle Suite 700<br>Chevy Chase MD, 20815</strong></div>
                </div>
                <div class="detail-item">
                    <div class="detail-icon">üåê</div>
                    <div class="detail-text"><strong>www.Mylestechsolution.com</strong></div>
                </div>
            </div>
            
            <div class="rsvp-section">
                <button class="rsvp-button" onclick="showRSVPForm()">RSVP NOW</button>
                
                <div class="rsvp-form" id="rsvpForm">
                    <h3 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">Confirm Your Attendance</h3>
                    <form id="attendeeForm">
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address (Optional)</label>
                            <input type="email" id="email" name="email">
                        </div>
                        <div class="form-group">
                            <label for="guestBy">Guest of (Optional)</label>
                            <input type="text" id="guestBy" name="guestBy" placeholder="Enter name of your host">
                        </div>
                        <button type="submit" class="submit-btn">Submit RSVP</button>
                        <button type="button" class="cancel-btn" onclick="hideRSVPForm()">Cancel</button>
                    </form>
                    <div class="loading-message" id="loadingMessage">
                        Submitting your RSVP... Please wait.
                    </div>
                    <div class="error-message" id="errorMessage">
                        <!-- Error message will be displayed here -->
                    </div>
                    <div class="success-message" id="successMessage">
                        <div class="shooting-stars">
                            <div class="star star-1"></div>
                            <div class="star star-2"></div>
                            <div class="star star-3"></div>
                            <div class="star star-4"></div>
                            <div class="star star-5"></div>
                        </div>
                        <div style="color: white; font-weight: bold; margin-bottom: 15px;">
                            üéâ Thank You! Registration Successful!
                        </div>
                        
                        <div style="color: white; font-size: 16px; margin-bottom: 20px; font-weight: 500;">
                            We can't wait to see you there! üåü
                        </div>
                        
                        <div class="barcode-section">
                            <div class="barcode-container">
                                <svg id="attendeeBarcode" width="250" height="60"></svg>
                                <div class="barcode-id" id="barcodeId">ID: Loading...</div>
                            </div>
                            <div class="scan-instructions">
                                üì± Please save this page or take a screenshot<br>
                                Show this barcode at the entrance for quick check-in
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; font-size: 14px;">
                            üìß A copy of this ticket has been sent to your email
                        </div>
                    </div>
                </div>
                
                <div class="contact-info">
                    <p><strong>Contact Information:</strong><br>
                    üìß events@mylestechsolutionsllc.com<br>
                    üì± (240) 460-4692<br>
                    üåê www.Mylestechsolution.com</p>
                    <p style="margin-top: 15px; font-style: italic;">
                        Presented by MylesTech Solutions<br>
                        Empowering Africa one digital solution at a time
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Include JsBarcode library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.5/JsBarcode.all.min.js"></script>

    <script>
        let invitationId = null;
        
        function generateInvitationId() {
            const timestamp = Date.now().toString(36).substring(-4);
            const randomStr = Math.random().toString(36).substring(2, 6);
            return `MZ-INV-${timestamp}${randomStr}`.toUpperCase();
        }
        
        function generateInvitationBarcode() {
            // Check if we already have an ID stored
            invitationId = localStorage.getItem('medzen_invitation_id');
            
            if (!invitationId) {
                // Generate new invitation ID
                invitationId = generateInvitationId();
                localStorage.setItem('medzen_invitation_id', invitationId);
            }
            
            try {
                // Generate barcode using Code128 with the shorter invitation ID
                JsBarcode("#invitationBarcode", invitationId, {
                    format: "CODE128",
                    width: 1.8,
                    height: 60,
                    displayValue: false,
                    background: "#ffffff",
                    lineColor: "#000000",
                    margin: 5
                });
                
            } catch (error) {
                console.error('Error generating invitation barcode:', error);
            }
        }
        
        // Generate invitation barcode when page loads (removed - no longer needed)
        // window.addEventListener('load', function() {
        //     setTimeout(generateInvitationBarcode, 500);
        // });
        
        let currentAttendeeData = null;
        
        function generateUniqueId() {
            const timestamp = Date.now().toString(36);
            const randomStr = Math.random().toString(36).substring(2, 8);
            return `MZ${timestamp}${randomStr}`.toUpperCase();
        }
        
        function generateBarcode(data) {
            const uniqueId = generateUniqueId();
            
            // Create barcode data string
            const barcodeData = `${uniqueId}|${data.name}|${data.phone}|${data.email}`;
            
            try {
                // Generate barcode using Code128
                JsBarcode("#attendeeBarcode", barcodeData, {
                    format: "CODE128",
                    width: 2,
                    height: 50,
                    displayValue: false,
                    background: "#ffffff",
                    lineColor: "#000000"
                });
                
                // Update barcode ID display
                document.getElementById('barcodeId').textContent = `ID: ${uniqueId}`;
                
                return uniqueId;
            } catch (error) {
                console.error('Error generating barcode:', error);
                document.getElementById('barcodeId').textContent = 'Barcode generation failed';
                return null;
            }
        }
        
        function showRSVPForm() {
            document.getElementById('rsvpForm').style.display = 'block';
            document.querySelector('.rsvp-button').style.display = 'none';
        }
        
        function hideRSVPForm() {
            document.getElementById('rsvpForm').style.display = 'none';
            document.querySelector('.rsvp-button').style.display = 'inline-block';
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('attendeeForm').style.display = 'block';
        }
        
        document.getElementById('attendeeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show loading message
            document.getElementById('attendeeForm').style.display = 'none';
            document.getElementById('loadingMessage').style.display = 'block';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
            
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                phone: formData.get('phone'),
                email: formData.get('email') || 'Not provided',
                guestBy: formData.get('guestBy') || 'Not specified',
                timestamp: new Date().toLocaleString(),
                event: 'MedZen Network & Fundraising Event - August 2nd, 2025'
                // Note: No invitation ID needed since we removed the invitation barcode
            };
            
            // Store attendee data for barcode generation
            currentAttendeeData = data;
            
            console.log('Submitting RSVP data:', data);
            
            // Send to your Google Apps Script
            fetch('https://script.google.com/macros/s/AKfycbwZbBhVkOFlwtaC7qNKb9XSB_B6lIZaIJv11DvarP1r5-ooOUCKPSOV15SSlfVk_SkGRQ/exec', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).then(response => {
                // Check if response is ok
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            }).then(result => {
                console.log('Server response:', result);
                document.getElementById('loadingMessage').style.display = 'none';
                
                if (result.status === 'success') {
                    // Generate barcode with attendee data
                    const uniqueId = generateBarcode(currentAttendeeData);
                    
                    // Show success message with barcode
                    document.getElementById('successMessage').style.display = 'block';
                } else {
                    // Show error message
                    document.getElementById('errorMessage').innerHTML = result.message || 'Registration failed. Please try again.';
                    document.getElementById('errorMessage').style.display = 'block';
                    
                    // Show form again for retry
                    setTimeout(() => {
                        document.getElementById('attendeeForm').style.display = 'block';
                        document.getElementById('errorMessage').style.display = 'none';
                    }, 5000);
                }
                
            }).catch((error) => {
                console.error('Error submitting RSVP:', error);
                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('errorMessage').innerHTML = 'Registration failed. Please try again or contact us at events@mylestechsolutionsllc.com';
                document.getElementById('errorMessage').style.display = 'block';
                
                // Show form again for retry
                setTimeout(() => {
                    document.getElementById('attendeeForm').style.display = 'block';
                    document.getElementById('errorMessage').style.display = 'none';
                }, 5000);
            });
        });
    </script>
</body>
</html>
